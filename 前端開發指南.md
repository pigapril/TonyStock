# 前端開發指南

## 目錄

1. [開始使用](#1-開始使用)
2. [專案結構](#2-專案結構)
3. [開發規範](#3-開發規範)
4. [元件開發](#4-元件開發)
5. [狀態管理](#5-狀態管理)
6. [效能優化](#6-效能優化)
7. [測試指南](#7-測試指南)
8. [部署流程](#8-部署流程)

## 1. 開始使用

### 1.1 環境設置
```bash
# 安裝依賴
npm install

# 開發模式啟動
npm start

# 建置專案
npm run build

# 執行測試
npm test
```

### 1.2 環境變數配置
- `.env.development`: 開發環境配置
- `.env.production`: 生產環境配置

主要環境變數：
```env
REACT_APP_API_BASE_URL=http://localhost:5001
```

## 2. 專案結構

### 2.1 目錄說明
```
frontend/
├── public/                 # 靜態資源
│   ├── index.html         # HTML 模板
│   ├── logo.*             # 應用程式圖標
│   └── manifest.json      # PWA 配置
├── src/                   # 源碼目錄
│   ├── components/        # React 元件
│   ├── utils/            # 工具函數
│   ├── App.js            # 應用程式主元件
│   └── index.js          # 入口文件
└── package.json          # 專案配置
```

### 2.2 重要檔案說明

#### 核心檔案
- `src/index.js`: 應用程式入口點，設置路由和全局配置
- `src/App.js`: 主要應用程式邏輯和路由配置
- `src/App.css`: 全局樣式

#### 元件目錄 (`src/components/`)
- `GaugeChart.js`: 量表圖表元件
- `MarketSentimentIndex.js`: 市場情緒指標元件
- `PageContainer.js`: 頁面容器元件
- `ULBandChart.js`: UL Band 圖表元件

#### 工具目錄 (`src/utils/`)
- `analytics.js`: 分析追蹤工具
- `errorHandler.js`: 錯誤處理工具

## 3. 開發規範

### 3.1 程式碼風格
```javascript
// 使用 const/let，避免 var
const Component = () => {
  const [state, setState] = useState(null);
  
  // 使用有意義的變數名稱
  const handleSubmit = (event) => {
    event.preventDefault();
    // ...
  };
  
  return (
    <div className="component">
      {/* JSX 內容 */}
    </div>
  );
};
```

### 3.2 元件命名規範
- 使用 PascalCase 命名元件
- 使用 camelCase 命名函數和變數
- CSS 類名使用 kebab-case

### 3.3 檔案組織
```
components/
├── YourComponent/
│   ├── index.js          # 元件主文件
│   ├── styles.css        # 樣式文件
│   └── YourComponent.test.js  # 測試文件
```

## 4. 元件開發

### 4.1 元件範例
```javascript:src/components/YourComponent/index.js
import React, { useState, useEffect } from 'react';
import './styles.css';

const YourComponent = ({ prop1, prop2 }) => {
  // 狀態管理
  const [data, setData] = useState(null);
  
  // 副作用處理
  useEffect(() => {
    // 初始化邏輯
  }, []);
  
  // 事件處理
  const handleEvent = () => {
    // 處理邏輯
  };
  
  return (
    <div className="your-component">
      {/* 元件內容 */}
    </div>
  );
};

export default YourComponent;
```

### 4.2 樣式指南
```css:src/components/YourComponent/styles.css
.your-component {
  /* 使用 CSS 變數 */
  --primary-color: #007bff;
  
  /* 使用 flexbox 佈局 */
  display: flex;
  flex-direction: column;
  
  /* 響應式設計 */
  @media (max-width: 768px) {
    /* 移動端樣式 */
  }
}
```

## 5. 狀態管理

### 5.1 React Hooks 使用
```javascript
// 狀態管理
const [state, setState] = useState(initialState);

// 副作用處理
useEffect(() => {
  // 執行副作用
  return () => {
    // 清理函數
  };
}, [dependencies]);

// 記憶化回調
const memoizedCallback = useCallback(() => {
  // 回調函數
}, [dependencies]);
```

### 5.2 資料流處理
```javascript
// API 請求處理
const fetchData = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/endpoint`);
    setData(response.data);
  } catch (error) {
    handleError(error);
  }
};
```

## 6. 效能優化

### 6.1 程式碼分割
```javascript
// 使用 React.lazy 進行代碼分割
const LazyComponent = React.lazy(() => import('./LazyComponent'));

// 在 Suspense 中使用
<Suspense fallback={<Loading />}>
  <LazyComponent />
</Suspense>
```

### 6.2 效能監控
```javascript:src/utils/analytics.js
// 使用 Analytics 追蹤效能
export const trackPerformance = (metric) => {
  Analytics.performance({
    metric_name: metric.name,
    value: metric.value
  });
};
```

## 7. 測試指南

### 7.1 單元測試
```javascript:src/components/YourComponent/YourComponent.test.js
import { render, screen, fireEvent } from '@testing-library/react';
import YourComponent from './YourComponent';

describe('YourComponent', () => {
  it('should render correctly', () => {
    render(<YourComponent />);
    expect(screen.getByText('預期文字')).toBeInTheDocument();
  });
  
  it('should handle user interaction', () => {
    render(<YourComponent />);
    fireEvent.click(screen.getByRole('button'));
    // 驗證互動結果
  });
});
```

### 7.2 整合測試
```javascript:src/App.test.js
import { render, screen } from '@testing-library/react';
import { BrowserRouter } from 'react-router-dom';
import App from './App';

test('full app rendering', () => {
  render(
    <BrowserRouter>
      <App />
    </BrowserRouter>
  );
  // 驗證應用程式渲染
});
```

## 8. 部署流程

### 8.1 建置配置
```json:netlify.toml
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

### 8.2 部署檢查清單
1. 環境變數配置
2. 建置優化
3. 靜態資源處理
4. 路由配置
5. 錯誤追蹤設置

### 8.3 部署指令
```bash
# 建置專案
npm run build

# 本地預覽建置結果
serve -s build

# Netlify 部署
netlify deploy
```

## 附錄：完整目錄結構
```
frontend/
├── README.md              # 專案說明文件
├── netlify.toml           # Netlify 配置
├── package.json          # 專案依賴配置
├── public/               # 靜態資源
│   ├── index.html       # HTML 模板
│   ├── logo.*           # 應用程式圖標
│   ├── manifest.json    # PWA 配置
│   └── robots.txt       # 搜尋引擎配置
└── src/                 # 源碼目錄
    ├── App.css          # 主應用程式樣式
    ├── App.js           # 主應用程式元件
    ├── App.test.js      # 主應用程式測試
    ├── components/      # React 元件
    │   ├── GaugeChart.js
    │   ├── IndicatorItem.css
    │   ├── IndicatorItem.js
    │   ├── MarketSentimentIndex.css
    │   ├── MarketSentimentIndex.js
    │   ├── PageContainer.css
    │   ├── PageContainer.js
    │   └── ULBandChart.js
    ├── index.css        # 全局樣式
    ├── index.js         # 應用程式入口
    ├── setupTests.js    # 測試配置
    └── utils/           # 工具函數
        ├── analytics.js  # 分析工具
        └── errorHandler.js # 錯誤處理
``` 