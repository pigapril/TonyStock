# 公告欄 URL 連結功能使用指南

## 🔗 功能概述

公告欄現在支援自動將文字中的 URL 轉換為可點擊的連結，讓用戶可以直接點擊訪問相關網站。

## ✨ 支援的 URL 格式

### 1. HTTP/HTTPS 連結
```
https://example.com
http://example.com
```

### 2. www 格式連結
```
www.example.com
```
*註：系統會自動添加 `https://` 前綴*

### 3. FTP 連結
```
ftp://files.example.com/file.zip
```

## 🎯 使用範例

### 基本使用
```
🎉 歡迎訪問我們的官網 https://example.com 了解更多！
```
**結果：** "https://example.com" 會變成可點擊的藍色連結

### 多個連結
```
🔗 訪問 https://docs.example.com 查看文檔，或到 www.support.com 獲取支援
```
**結果：** 兩個 URL 都會變成可點擊的連結

### 長 URL 自動縮短
```
📊 詳細報告請見 https://reports.example.com/very/long/path/to/detailed-report.html
```
**結果：** 顯示為 "https://reports.example.com/very/long/pa⋯" 但連結到完整 URL

## 🔒 安全特性

- **新視窗開啟**：所有連結都會在新視窗/標籤頁中開啟
- **安全屬性**：自動添加 `rel="noopener noreferrer"` 防止安全風險
- **URL 驗證**：只有有效的 URL 格式才會被轉換為連結

## 🎨 視覺設計

- **顏色**：連結使用蘋果藍色 (#007AFF)
- **懸停效果**：滑鼠懸停時顏色變深並顯示底線
- **響應式**：在不同螢幕尺寸下都有良好的顯示效果

## 📱 移動端優化

- **觸控友好**：增加觸控區域，方便手機用戶點擊
- **自動換行**：長連結在小螢幕上會適當換行
- **字體調整**：在超小螢幕上使用較小的字體
- **🆕 展開功能**：長公告在小螢幕上會自動截斷，點擊可展開查看完整內容

### 📱 展開/收合功能

**觸發條件：**
- 螢幕寬度 ≤ 768px（平板和手機）
- 公告內容超過 80 個字符

**使用方式：**
- 長公告會自動截斷為前 60 個字符 + "⋯⋯"
- 點擊公告內容區域或展開按鈕（▼）可展開完整內容
- 展開後點擊收合按鈕（▲）可重新收合
- 展開狀態下仍可正常關閉公告

**視覺設計：**
- 展開按鈕使用蘋果風格的毛玻璃效果
- 平滑的展開/收合動畫
- 展開時箭頭圖標會旋轉 180 度

## 🛠 技術實現

### 核心檔案
- `urlLinkifier.js`：URL 檢測和轉換工具
- `AnnouncementBar.js`：主公告欄組件
- `AnnouncementBarPreview.js`：預覽組件
- `AnnouncementBar.css`：樣式定義

### 主要函數
- `hasUrls(text)`：檢測文字是否包含 URL
- `linkify(text, options)`：將 URL 轉換為 React 連結元素

## 📝 使用方法

1. **在管理後台**：直接在公告內容中輸入包含 URL 的文字
2. **自動轉換**：系統會自動檢測並轉換 URL 為連結
3. **即時預覽**：在預覽區域可以看到連結效果
4. **發布生效**：儲存後，前端會在 30 秒內自動更新

## 🔍 故障排除

### 連結沒有顯示
- 檢查 URL 格式是否正確
- 確認 URL 包含有效的域名
- 檢查瀏覽器控制台是否有錯誤

### 連結無法點擊
- 確認瀏覽器允許彈出視窗
- 檢查網路連接
- 確認目標網站是否可訪問

### 樣式問題
- 清除瀏覽器快取
- 檢查 CSS 是否正確載入
- 確認沒有其他樣式衝突

## 🚀 未來擴展

計劃中的功能：
- 支援 email 地址自動轉換
- 自定義連結樣式
- 連結預覽功能
- 短網址展開

---

**💡 提示：** 這個功能完全自動化，您只需要在公告內容中包含 URL，系統會自動處理其餘的工作！