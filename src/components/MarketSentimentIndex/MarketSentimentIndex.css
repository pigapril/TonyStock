/* 引入 Loading 樣式 */
@import '../Loading/Loading.css';

.market-sentiment {
  padding: 20px;
}

.composite-score {
  margin-bottom: 20px;
}


.indicators-list {
  display: flex;
  flex-direction: column;
}


.real-data {
  color: green;
}

.simulated-data {
  color: red;
}

.indicator-description {
  margin-top: 10px;
  font-size: 14px;
  color: #555;
}

.chart-container {
  position: relative;
  width: 100%;
  height: 450px; /* 根據需要調整高度 */
}

/* 確保市場情緒指數頁面在小螢幕上顯示良好 */
.market-sentiment-index {
  overscroll-behavior: contain;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 在市場情緒指數頁面中置中 TimeRangeSelector */
.indicator-item .time-range-selector {
  justify-content: center;
  margin: 20px auto;
  width: fit-content;
}

.last-update-time {
  text-align: center;
  color: #666;
  font-size: 12px;
  margin-top: 0px;  /* 增加上方間距 */
  margin-bottom: 15px;
  position: relative;  /* 確保位置正確 */
  z-index: 1;  /* 確保文字在最上層 */
}

/* 新增以下部分 */
@media (max-width: 768px) {
  .indicator-list {
    flex-direction: column; /* 小螢幕上垂直排列 */
  }

  .indicator-chart {
    height: 200px; /* 調整圖表高度 */
  }
}

/* 確保圖表卡片的寬度一致 */
.sentiment-dashboard {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 20px;
}

.sentiment-chart-card {
  width: calc(33.333% - 20px); /* 每列顯示三個圖表卡片減去間距 */
  background-color: white;
  border-radius: 1px;
  padding: 20px;
  box-sizing: border-box;
}

@media (max-width: 1024px) {
  .sentiment-chart-card {
    width: calc(50% - 20px); /* 中等螢幕每列顯示兩個圖表卡片 */
  }
}

@media (max-width: 768px) {
  .sentiment-dashboard {
    flex-direction: column;
  }
  .sentiment-chart-card {
    width: 100%; /* 小螢幕上圖表卡片佔據全寬 */
  }
}

/* 調整指標列表的佈局 */
.indicator-list {
  display: flex;
  flex-direction: column; /* 垂直排列 */
  gap: 20px;
  width: 100%;
  box-sizing: border-box;
}

/* 調整指標項目的樣式 */
.indicator-item {
  width: 100%;
  background-color: white;
  padding: 20px;
  border-radius: 8px;
  box-sizing: border-box;
  margin-bottom: 30px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* 調整圖表區域的樣式 */
.indicator-chart {
  height: 35vh;
  max-height: 35vh ;
}

@media (min-width: 1920px) {
  .indicator-chart {
    height: 40vh;
    max-height: 40vh ;
  }
}

.indicator-chart-container {
  width: 100%;
  overflow: hidden;

}


/* 移除大螢幕桌面版面配置的特殊處理 */

.analysis-description {
  margin-top: 30px; /* 增加頂部間距 */
  margin-bottom: 20px;
  font-size: 16px;
  line-height: 1.6;
  color: #333;
  max-width: 100%;
  width: 100%;
  text-align: justify;
  hyphens: auto;
  word-wrap: break-word;
}

/* 移除以下 h3 樣式 */
/* .indicator-item h3 {
  font-size: 20px;
  color: #333;
  margin: 0 0 10px 0;
  padding: 0;
} */

.tabs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); /* 減小最小寬度 */
  gap: 8px; /* 稍微減小間距 */
  margin-bottom: 20px;
  justify-content: center; /* 水平分布 */
}

.tab-button {
  padding: 8px 5px; /* 減小上下內邊距，左右內邊距更小 */
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 12px; /* 減小字體大小 */
  text-align: center;
  transition: all 0.3s ease;
  background-color: #e0e0e0;
  color: #333;
  white-space: nowrap; /* 防止文字換行 */
  overflow: hidden; /* 隱藏溢出的文字 */
  text-overflow: ellipsis; /* 使用省略號表示溢出的文字 */
  line-height: 1.2; /* 調整行高 */
}

.tab-button.active {
  background-color: #4a4a4a;
  color: white;
}

/* 在小螢幕上進一步調整 */
@media (max-width: 768px) {
  .tabs-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); /* 進一步減小最小寬度 */
  }

  .tab-button {
    font-size: 11px; /* 在小螢幕上進一步減小字體 */
    padding: 6px 4px; /* 在小螢幕上進一步減小內邊距 */
  }
}

.tab-content {
  /* background-color: white; */ /* 移除背景色 */
  /* border-radius: 8px; */ /* 如果 indicator-item 總是有 radius，這裡也可以考慮移除 */
  /* padding: 0; */ 
  /* box-shadow: 0 2px 4px rgba(0,0,0,0.1); */ /* 移除陰影 */
  /* indicator-item 將提供卡片視覺效果 */
}

/* 新增：主內容區域佈局 */
.content-layout-container {
  display: flex;
  flex-direction: column; /* 預設垂直排列，適用於小螢幕 */
  gap: 20px; /* 垂直和水平間距 */
  margin-top: 20px; /* 與上方 tabs 的間距 */
  height: 70vh; /* 改為 70% 的 viewport height */
  max-height: 70vh; /* 全局最大高度限制也改為 70vh */
}

/* .tab-content 的樣式已在上方定義，此處註解掉重複或不再需要的規則 */
/* .tab-content { */
  /* box-shadow 和 border-radius 已有，保持即可 */
  /* 移除固定的 padding，讓子元件控制 */
  /* padding: 0; */ 
  /* 在 flex 佈局中，不需要 width: 100% */
/* } */

.description-container-wrapper {
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  padding: 0; /* 改為 0，padding 移至 description-scroll-content */
  display: flex; /* 設為基礎樣式 */
  flex-direction: column; /* 設為基礎樣式 */
  min-height: 0; /* 設為基礎樣式，防止內容撐開 */
  flex-grow: 1; /* 新增：讓其在垂直方向上填滿剩餘空間 (手機) */
}

.description-scroll-content {
  padding: 20px; /* 設為基礎樣式 */
  overflow-y: auto; /* 設為基礎樣式，內容超出時顯示垂直捲軸 */
  flex-grow: 1; /* 設為基礎樣式，填滿 description-container-wrapper 的剩餘高度 */
  
  /* 美化捲軸 (可選，主要針對 WebKit 瀏覽器) - 設為基礎樣式 */
}
.description-scroll-content::-webkit-scrollbar {
  width: 8px;
}
.description-scroll-content::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 10px;
}
.description-scroll-content::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 10px;
}
.description-scroll-content::-webkit-scrollbar-thumb:hover {
  background: #aaa;
}

@media (max-width: 430px) {
  .content-layout-container {
    height: 100vh;
    max-height: 100vh;
  }
  .content-layout-container .tab-content .indicator-item {
    height: 500px;
    max-height: 500px; /* 全局最大高度限制 */
  }
  .indicator-item .indicator-chart {
    height: 250px;
  }
  .indicator-item .indicator-chart-container .gauge-chart {
    margin-top:15%;
    height: 195px;
  }
  .description-scroll-content .description-container {
    padding-top: 5px;
  }
}

@media (min-width: 1024px) {
  .content-layout-container {
    flex-direction: row; /* 大螢幕改為水平排列 */
    align-items: stretch; /* 讓子元素等高 */
  }

  .tab-content {
    flex: 2; /* tab-content 佔據約 2/3 空間 */
    display: flex; 
    flex-direction: column; 
  }

  /* 新增：讓 indicator-item 在 tab-content 內部伸展 */
  .tab-content > .indicator-item {
    flex-grow: 1; /* 允許 indicator-item 填滿可用空間 */
    margin-bottom: 0; /* 移除底部邊距，確保高度準確匹配 */
  }
  

  .description-container-wrapper {
    flex: 1; /* description 佔據約 1/3 空間 (此處會覆蓋基礎的 flex-grow) */
    /* display: flex, flex-direction: column, padding: 0, min-height: 0 已是基礎樣式 */
  }

  /* .description-scroll-content 的樣式已是基礎樣式，無需重複 */
}

/* 確保在觸摸設備上的滾動行為正常 */
@media (hover: none) and (pointer: coarse) {
  .indicator-chart-container {
    touch-action: pan-x pan-y;
  }
}

.view-mode-selector {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}

.view-mode-button {
  padding: 8px 16px;
  margin: 0 5px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s ease;
  background-color: #e0e0e0;
  color: #333;
}

.view-mode-button.active {
  background-color: #4a4a4a;
  color: white;
}

.gauge-chart {
  position: relative;
  width: 600px;
  height: 340px;
  padding-top: 40px;
  margin: 0 auto;
}

.gauge-center-value {
  position: absolute;
  bottom: 60px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 48px;
  font-weight: bold;
  color: #4a4a4a;
  background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(240,240,240,1) 100%);
  width: 90px;
  height: 90px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.gauge-labels {
  position: absolute;
  bottom: 40px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-between;
  font-size: 28px; /* For large screens */
  color: #333;
  font-weight: bold;
}

.gauge-label {
  position: absolute;
  bottom: 0;
}

.gauge-label-left {
  left: 10%;
  transform: translateX(-50%);
}

.gauge-label-right {
  right: 10%;
  transform: translateX(50%);
}

@media (max-width: 1280px) {
  .indicator-item .analysis-result{
    padding: 0px 10px;
  }
  .indicator-item .time-range-selector {
    margin: 5px auto;
  }
  .indicator-chart-container .gauge-chart {
    max-width: 600px; /* Use max-width for responsiveness */
    width: 100%; /* Allow it to shrink if container is smaller */
    height: auto; /* Adjust height automatically */
    padding-top: 0px; 
    padding-bottom: 0px; 
  }
  .last-update-time {
    margin-top: -20px;
  }
}

@media (max-width: 768px) {
  .gauge-chart {
    /* Revert to original small screen size */
    max-width: 250px; /* Use max-width for responsiveness */
    width: 100%; /* Allow it to shrink if container is smaller */
    height: auto; /* Adjust height automatically */
    padding-top: 0px; 
    padding-bottom: 0px; /* Explicitly set if needed, or rely on content */
  }

  .gauge-center-value {
    /* Revert to original small screen size */
    font-size: 20px;
    width: 40px; 
    height: 40px; 
    bottom: 50px; 
  }

  .gauge-labels {
    /* Revert to original small screen size */
    bottom: 40px;
    font-size: 14px; /* Explicitly set to original small screen font size */
  }
}

/* 確保 GaugeChart 組件在容器中正確定位 */
.gauge-chart > div:nth-child(2) {
  position: absolute;
  bottom: 30px;
  left: 0;
  right: 0;
}

@media (max-width: 768px) {
  .indicator-chart-container {
    margin-bottom: 0px; /* 在小螢幕上使用較小的間距 */
    padding-bottom: 0px;
  }

  .analysis-description {
    margin-top: 20px; /* 在小螢幕上使用較小的間距 */
  }
}



@media (min-width: 1024px) {
  .last-update-time {
    font-size: 20px;
  }
}



/* 新增：確保 analysis-result 置中 */
.indicator-item .analysis-result {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  margin: 10px auto;
  overflow: hidden;
  width: 95%;
}
@media (max-width: 768px) {
  .indicator-item {
    padding:20px 15px;
  }
  .indicator-item .analysis-result {
    width: 100%;
    align-items: flex-start;
  }

}


.view-mode-selector-container {
  display: flex;
  gap: 8px;
  background-color: #f5f5f7;
  padding: 4px;
  border-radius: 8px;
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
}

.view-mode-button {
  padding: 8px 16px;
  border: none;
  background: none;
  cursor: pointer;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  color: #86868b;
  transition: all 0.2s ease;
  position: relative;
  white-space: nowrap;
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
}

.view-mode-button:hover {
  color: #1d1d1f;
}

.view-mode-button.active {
  background-color: #ffffff;
  color: #1d1d1f;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* 適配移動設備 */
@media (max-width: 768px) {
  .view-mode-selector-container {
    width: 80%;
    justify-content: stretch;
    background-color: #f5f5f7;
    padding: 3px;
  }

  .view-mode-button {
    flex: 1;
    text-align: center;
    padding: 8px 8px;
    font-size: 13px;
  }
}

/* 新增情緒文字顏色 */
/* 更新：使用英文鍵名 */
.analysis-value.sentiment-extremeFear {
  color: #143829; /* 極度恐懼 - 深綠色 */
}

.analysis-value.sentiment-fear {
  color: #2B5B3F; /* 恐懼 - 綠色 */
}

.analysis-value.sentiment-neutral {
  color: #E9972D; /* 中性 - 黃色 */
}

.analysis-value.sentiment-greed {
  color: #C4501B; /* 貪婪 - 橘色 */
}

.analysis-value.sentiment-extremeGreed {
  color: #A0361B; /* 極度貪婪 - 紅色 */
}

